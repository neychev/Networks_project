#Система контроля доступа с применением технологии BlockChain
#### Ефимов Юрий, Назаров Владимир, Нейчев Радослав
#### Июнь 2016

## Общая идея системы
Реализованная система предназначена для контроля и логгирования доступа клиентов к различным частям некоторой инфраструктуры. Для хранения и защиты данных была взята идея технологии BlockChain, что повышает надежность системы и её устойчивость к подменне данных.

## Архитектура
Система состоит из трех уровней:


  * Терминал. Имеет два уровня доступа:
    
    * Клиент. Базовый пользователь данной системы, права клиента выдаются всем автоматическим устройствам контроля доступа (например, турникеты и магнитные замки в случае реальной инфраструктуры некоторого объекта).
    
    * Администратор. Панель администратора позволяют получать доступ к истории событий, отслеживать перемещения клиентов и их действия. Также является клиентом, но обладающим правами администратора.
    
  * Внешний сервер. Система из нескольких внешних серверов, на которые ложится основная нагрузка по обработке входящей информации.
    
  * Внутренний сервер. Сервер, имеющий связь исключительно с внешними серверами. Существует в единственном виде. На этом сервере хранится история в виде цепочек.

Схематически архитектура системы приведена на Рис.1
![example image](fig1.png "Схематическое изображение системы")


## Сетевое взаимодействие
Сетевое взаимодействие между различными уровнями системы реализовано с помощью кроссплатворменного протокола XML-RPC. Данный протокол использует XML для кодирования своих сообщений и HTTP (HTTPS) в качестве транспортного механизма.

Взаимодействие в рамках одного уровня в текущей версии не реализовано.

## Документация возможностей
В данной секции приведены основные возможности каждого уровня системы.

#### Уровень терминала:
Терминал реализован как консольное приложение, по запуску он ожидает на вход одну из следующих команд. Команды и аргументы разделяются пробелом (space). Администратору доступны все команды, доступные клиенту.
  * Клиент:
    * Enter (string)client_id (int)location_id -> bool--- запрос на вход в локацию location_id от пользователя client_id.
    * Exit (string)client_id -> bool                  --- запрос на выход из текущей локации от пользователя client_id.
    * getStatistics -> string                         --- запрос строки состояния системы. Если одна из команд вернула False, содержит текст ошибки. В противном случае содержит пустую строку.
    * quit -> NULL                                    --- завершение сеанса терминала.
  * Администратор:
    * getLocation (string)admin_id (string)client_id (datetime)at -> int  --- возвращает location_id, в которой находился клиент client_id в момент времени at. В случае ошибки возвращает число меньше 1.
    * getUsers (string)admin_id (int)location_id (datetime)at -> list[string] --- возвращает список client_id клиентов, находившихся в локации location_id в момент времени at. 
    * createLocation (string)admin_id -> int          --- создает новую локацию. Если локация создана, возвращается ее location_id. В случае ошибки возвращает число меньше 1.
    * createUser (string)admin_id -> string           --- создает нового пользователя. Если пользователь создан, возвращается строка, содержащая его client_id. В противном случае произошла ошибка.
    * upgradeUser (string)admin_id (string)client_id -> bool --- присваивает пользователю client_id права администратора. В случае возврата True - операция успешна, иначе произошла ошибка.
    * downgradeUser (string)admin_id (string)client_id -> bool --- лишает пользователя client_id прав администратора. В случае возврата True - операция успешна, иначе произошла ошибка.

#### Уровень внешнего сервера

#### Уровень внутреннего сервера
